<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®Ÿè£…è¨ˆç”»æ›¸ - eBay/Joomè‡ªå‹•å‡ºå“ã‚·ã‚¹ãƒ†ãƒ </title>
    <style>
        :root {
            --bg-primary: #0d1117;
            --bg-secondary: #161b22;
            --bg-tertiary: #21262d;
            --text-primary: #e6edf3;
            --text-secondary: #8b949e;
            --accent-blue: #58a6ff;
            --accent-green: #3fb950;
            --accent-purple: #a371f7;
            --accent-orange: #d29922;
            --accent-red: #f85149;
            --accent-cyan: #39c5cf;
            --border-color: #30363d;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 30px;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(90deg, var(--accent-green), var(--accent-cyan));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        header p {
            color: var(--text-secondary);
            font-size: 1.1em;
        }

        .badge {
            display: inline-block;
            padding: 5px 15px;
            background: var(--accent-purple);
            color: white;
            border-radius: 20px;
            font-size: 0.9em;
            margin-top: 15px;
        }

        .tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            background: var(--bg-secondary);
            padding: 10px;
            border-radius: 10px;
        }

        .tab {
            padding: 12px 24px;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            border-radius: 8px;
            font-size: 1em;
            transition: all 0.3s;
        }

        .tab:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .tab.active {
            background: var(--accent-green);
            color: white;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .card h2 {
            color: var(--accent-green);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        .card h3 {
            color: var(--accent-cyan);
            margin: 20px 0 10px;
        }

        .card h4 {
            color: var(--accent-purple);
            margin: 15px 0 10px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        th {
            background: var(--bg-tertiary);
            color: var(--accent-blue);
            font-weight: 600;
        }

        tr:hover {
            background: var(--bg-tertiary);
        }

        pre {
            background: var(--bg-tertiary);
            border-radius: 10px;
            padding: 20px;
            overflow-x: auto;
            font-family: 'Monaco', 'Menlo', 'Consolas', monospace;
            font-size: 0.85em;
            line-height: 1.5;
            margin: 15px 0;
            border: 1px solid var(--border-color);
        }

        code {
            font-family: 'Monaco', 'Menlo', 'Consolas', monospace;
            background: var(--bg-tertiary);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.9em;
        }

        .file-tree {
            background: var(--bg-tertiary);
            border-radius: 10px;
            padding: 20px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9em;
            line-height: 1.8;
        }

        .file-tree .folder {
            color: var(--accent-blue);
        }

        .file-tree .file {
            color: var(--text-secondary);
        }

        .file-tree .comment {
            color: var(--accent-green);
            font-style: italic;
        }

        .schema-block {
            background: linear-gradient(135deg, #1a1a2e 0%, #0d1117 100%);
            border: 1px solid var(--accent-purple);
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
        }

        .schema-block h4 {
            color: var(--accent-purple);
            margin-bottom: 15px;
        }

        .field-list {
            list-style: none;
        }

        .field-list li {
            padding: 8px 0;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .field-list li:last-child {
            border-bottom: none;
        }

        .field-name {
            color: var(--accent-cyan);
            font-family: monospace;
        }

        .field-type {
            color: var(--accent-orange);
            font-family: monospace;
            font-size: 0.9em;
        }

        .field-desc {
            color: var(--text-secondary);
            font-size: 0.85em;
        }

        .queue-card {
            background: var(--bg-tertiary);
            border-radius: 10px;
            padding: 20px;
            margin: 10px 0;
            border-left: 4px solid var(--accent-blue);
        }

        .queue-card.priority-1 { border-left-color: var(--accent-red); }
        .queue-card.priority-2 { border-left-color: var(--accent-orange); }
        .queue-card.priority-3 { border-left-color: var(--accent-green); }
        .queue-card.priority-4 { border-left-color: var(--accent-blue); }
        .queue-card.priority-5 { border-left-color: var(--accent-purple); }

        .queue-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .queue-name {
            font-weight: bold;
            color: var(--accent-cyan);
            font-family: monospace;
        }

        .queue-priority {
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.8em;
        }

        .queue-priority.p1 { background: var(--accent-red); color: white; }
        .queue-priority.p2 { background: var(--accent-orange); color: white; }
        .queue-priority.p3 { background: var(--accent-green); color: white; }
        .queue-priority.p4 { background: var(--accent-blue); color: white; }
        .queue-priority.p5 { background: var(--accent-purple); color: white; }

        .queue-settings {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            color: var(--text-secondary);
            font-size: 0.9em;
        }

        .consensus-box {
            background: linear-gradient(135deg, var(--accent-green), var(--accent-cyan));
            padding: 20px;
            border-radius: 10px;
            color: white;
            margin: 20px 0;
        }

        .consensus-box h4 {
            margin-bottom: 10px;
            color: white;
        }

        .consensus-list {
            list-style: none;
        }

        .consensus-list li {
            padding: 5px 0;
            padding-left: 25px;
            position: relative;
        }

        .consensus-list li::before {
            content: 'âœ“';
            position: absolute;
            left: 0;
        }

        .step-list {
            counter-reset: step-counter;
            list-style: none;
        }

        .step-list li {
            counter-increment: step-counter;
            padding: 15px 15px 15px 60px;
            position: relative;
            background: var(--bg-tertiary);
            border-radius: 10px;
            margin-bottom: 10px;
        }

        .step-list li::before {
            content: counter(step-counter);
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            width: 30px;
            height: 30px;
            background: var(--accent-green);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .docker-service {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: var(--bg-tertiary);
            border-radius: 10px;
            margin: 10px 0;
        }

        .docker-icon {
            width: 50px;
            height: 50px;
            background: var(--bg-secondary);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
        }

        .docker-info .name {
            font-weight: bold;
            color: var(--accent-cyan);
        }

        .docker-info .port {
            color: var(--accent-orange);
            font-family: monospace;
            font-size: 0.9em;
        }

        .docker-info .desc {
            color: var(--text-secondary);
            font-size: 0.9em;
        }

        .env-table {
            font-family: monospace;
            font-size: 0.85em;
        }

        .env-table td:first-child {
            color: var(--accent-cyan);
        }

        .env-table td:nth-child(2) {
            color: var(--accent-orange);
        }

        .warning-box {
            background: rgba(248, 81, 73, 0.1);
            border: 1px solid var(--accent-red);
            border-radius: 10px;
            padding: 15px 20px;
            margin: 15px 0;
        }

        .warning-box::before {
            content: 'âš ï¸ ';
        }

        .info-box {
            background: rgba(88, 166, 255, 0.1);
            border: 1px solid var(--accent-blue);
            border-radius: 10px;
            padding: 15px 20px;
            margin: 15px 0;
        }

        .info-box::before {
            content: 'ğŸ’¡ ';
        }

        .nav-links {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 20px;
        }

        .nav-links a {
            color: var(--accent-blue);
            text-decoration: none;
            padding: 10px 20px;
            border: 1px solid var(--accent-blue);
            border-radius: 8px;
            transition: all 0.3s;
        }

        .nav-links a:hover {
            background: var(--accent-blue);
            color: white;
        }

        footer {
            text-align: center;
            padding: 30px;
            color: var(--text-secondary);
            border-top: 1px solid var(--border-color);
            margin-top: 40px;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8em;
            }

            .tabs {
                flex-direction: column;
            }

            .tab {
                text-align: center;
            }

            .queue-settings {
                flex-direction: column;
                gap: 5px;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>å®Ÿè£…è¨ˆç”»æ›¸ï¼ˆè©³ç´°ç‰ˆï¼‰</h1>
        <p>eBay/Joomè‡ªå‹•å‡ºå“ã‚·ã‚¹ãƒ†ãƒ  - Phase 1 åŸºç›¤æ§‹ç¯‰</p>
        <span class="badge">3è€…AIå”è­° çµ±åˆç‰ˆ</span>
        <div class="nav-links">
            <a href="index.html">â† è¨­è¨ˆè¨ˆç”»æ›¸ã«æˆ»ã‚‹</a>
        </div>
    </header>

    <div class="container">
        <div class="tabs">
            <button class="tab active" onclick="showTab('structure')">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ</button>
            <button class="tab" onclick="showTab('docker')">Dockerç’°å¢ƒ</button>
            <button class="tab" onclick="showTab('database')">DBè¨­è¨ˆ</button>
            <button class="tab" onclick="showTab('schema')">å‹å®šç¾©ãƒ»ã‚¹ã‚­ãƒ¼ãƒ</button>
            <button class="tab" onclick="showTab('queue')">ã‚¸ãƒ§ãƒ–ã‚­ãƒ¥ãƒ¼</button>
            <button class="tab" onclick="showTab('env')">ç’°å¢ƒå¤‰æ•°</button>
            <button class="tab" onclick="showTab('roadmap')">å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—</button>
        </div>

        <!-- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ -->
        <div id="structure" class="tab-content active">
            <div class="card">
                <h2>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆï¼ˆTurborepo ãƒ¢ãƒãƒ¬ãƒï¼‰</h2>

                <div class="info-box">
                    ãƒ¢ãƒãƒ¬ãƒæ§‹æˆã«ã‚ˆã‚Šã€å…±æœ‰å‹ãƒ»ã‚¹ã‚­ãƒ¼ãƒãƒ»ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã®åŒæœŸã‚³ã‚¹ãƒˆã‚’æœ€å°åŒ–ã€‚Turborepoã§ãƒ“ãƒ«ãƒ‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¨ä¸¦åˆ—å®Ÿè¡Œã‚’å®Ÿç¾ã€‚
                </div>

                <div class="file-tree">
<span class="folder">auto-listing-system/</span>
â”œâ”€â”€ <span class="file">docker-compose.yml</span>          <span class="comment"># é–‹ç™ºç’°å¢ƒï¼ˆPostgres, Redis, MinIOï¼‰</span>
â”œâ”€â”€ <span class="file">turbo.json</span>                  <span class="comment"># Turborepoè¨­å®š</span>
â”œâ”€â”€ <span class="file">package.json</span>                <span class="comment"># ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹å®šç¾©</span>
â”œâ”€â”€ <span class="file">.env.example</span>                <span class="comment"># ç’°å¢ƒå¤‰æ•°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</span>
â”œâ”€â”€ <span class="file">.gitignore</span>
â”‚
â”œâ”€â”€ <span class="folder">apps/</span>                         <span class="comment"># ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤</span>
â”‚   â”œâ”€â”€ <span class="folder">web/</span>                      <span class="comment"># Next.js ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰</span>
â”‚   â”‚   â”œâ”€â”€ <span class="file">package.json</span>
â”‚   â”‚   â”œâ”€â”€ <span class="folder">src/</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="folder">app/</span>              <span class="comment"># App Router</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="folder">components/</span>       <span class="comment"># UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</span>
â”‚   â”‚   â”‚   â””â”€â”€ <span class="folder">lib/</span>              <span class="comment"># ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£</span>
â”‚   â”‚   â””â”€â”€ <span class="file">next.config.js</span>
â”‚   â”‚
â”‚   â”œâ”€â”€ <span class="folder">api/</span>                      <span class="comment"># Express API Gateway</span>
â”‚   â”‚   â”œâ”€â”€ <span class="file">package.json</span>
â”‚   â”‚   â”œâ”€â”€ <span class="folder">src/</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="folder">routes/</span>           <span class="comment"># ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®šç¾©</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="folder">middleware/</span>       <span class="comment"># èªè¨¼ãƒ»ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="folder">services/</span>         <span class="comment"># ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯</span>
â”‚   â”‚   â”‚   â””â”€â”€ <span class="file">index.ts</span>
â”‚   â”‚   â””â”€â”€ <span class="file">Dockerfile</span>
â”‚   â”‚
â”‚   â””â”€â”€ <span class="folder">worker/</span>                   <span class="comment"># BullMQ ãƒ¯ãƒ¼ã‚«ãƒ¼</span>
â”‚       â”œâ”€â”€ <span class="file">package.json</span>
â”‚       â”œâ”€â”€ <span class="folder">src/</span>
â”‚       â”‚   â”œâ”€â”€ <span class="folder">processors/</span>       <span class="comment"># ã‚¸ãƒ§ãƒ–ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼</span>
â”‚       â”‚   â”‚   â”œâ”€â”€ <span class="file">scrape.ts</span>
â”‚       â”‚   â”‚   â”œâ”€â”€ <span class="file">image.ts</span>
â”‚       â”‚   â”‚   â”œâ”€â”€ <span class="file">translate.ts</span>
â”‚       â”‚   â”‚   â”œâ”€â”€ <span class="file">publish.ts</span>
â”‚       â”‚   â”‚   â””â”€â”€ <span class="file">inventory.ts</span>
â”‚       â”‚   â”œâ”€â”€ <span class="folder">queues/</span>           <span class="comment"># ã‚­ãƒ¥ãƒ¼å®šç¾©</span>
â”‚       â”‚   â”œâ”€â”€ <span class="file">graceful-shutdown.ts</span>
â”‚       â”‚   â””â”€â”€ <span class="file">index.ts</span>
â”‚       â””â”€â”€ <span class="file">Dockerfile</span>
â”‚
â”œâ”€â”€ <span class="folder">packages/</span>                     <span class="comment"># å…±æœ‰ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸</span>
â”‚   â”œâ”€â”€ <span class="folder">database/</span>                 <span class="comment"># Prisma ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ</span>
â”‚   â”‚   â”œâ”€â”€ <span class="file">package.json</span>
â”‚   â”‚   â”œâ”€â”€ <span class="folder">prisma/</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ <span class="file">schema.prisma</span>
â”‚   â”‚   â”‚   â””â”€â”€ <span class="folder">migrations/</span>
â”‚   â”‚   â””â”€â”€ <span class="folder">src/</span>
â”‚   â”‚       â””â”€â”€ <span class="file">client.ts</span>
â”‚   â”‚
â”‚   â”œâ”€â”€ <span class="folder">schema/</span>                   <span class="comment"># Zod ã‚¹ã‚­ãƒ¼ãƒå®šç¾©</span>
â”‚   â”‚   â”œâ”€â”€ <span class="file">package.json</span>
â”‚   â”‚   â””â”€â”€ <span class="folder">src/</span>
â”‚   â”‚       â”œâ”€â”€ <span class="file">product.ts</span>        <span class="comment"># çµ±ä¸€å•†å“ãƒ¢ãƒ‡ãƒ«</span>
â”‚   â”‚       â”œâ”€â”€ <span class="file">listing.ts</span>        <span class="comment"># å‡ºå“æƒ…å ±</span>
â”‚   â”‚       â”œâ”€â”€ <span class="file">job.ts</span>            <span class="comment"># ã‚¸ãƒ§ãƒ–ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰</span>
â”‚   â”‚       â””â”€â”€ <span class="file">index.ts</span>
â”‚   â”‚
â”‚   â”œâ”€â”€ <span class="folder">logger/</span>                   <span class="comment"># Pino æ§‹é€ åŒ–ãƒ­ã‚¬ãƒ¼</span>
â”‚   â”‚   â”œâ”€â”€ <span class="file">package.json</span>
â”‚   â”‚   â””â”€â”€ <span class="folder">src/</span>
â”‚   â”‚       â””â”€â”€ <span class="file">index.ts</span>
â”‚   â”‚
â”‚   â””â”€â”€ <span class="folder">config/</span>                   <span class="comment"># å…±é€šè¨­å®š</span>
â”‚       â”œâ”€â”€ <span class="file">package.json</span>
â”‚       â””â”€â”€ <span class="folder">src/</span>
â”‚           â”œâ”€â”€ <span class="file">env.ts</span>            <span class="comment"># ç’°å¢ƒå¤‰æ•°ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³</span>
â”‚           â””â”€â”€ <span class="file">constants.ts</span>
â”‚
â”œâ”€â”€ <span class="folder">services/</span>                     <span class="comment"># å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹é€£æº</span>
â”‚   â””â”€â”€ <span class="folder">image-processor/</span>          <span class="comment"># Python rembg ã‚µãƒ¼ãƒ“ã‚¹</span>
â”‚       â”œâ”€â”€ <span class="file">Dockerfile</span>
â”‚       â”œâ”€â”€ <span class="file">requirements.txt</span>
â”‚       â””â”€â”€ <span class="folder">src/</span>
â”‚           â”œâ”€â”€ <span class="file">main.py</span>           <span class="comment"># FastAPI ã‚µãƒ¼ãƒãƒ¼</span>
â”‚           â””â”€â”€ <span class="file">processor.py</span>      <span class="comment"># ç™½æŠœãå‡¦ç†</span>
â”‚
â”œâ”€â”€ <span class="folder">extension/</span>                    <span class="comment"># Chromeæ‹¡å¼µæ©Ÿèƒ½</span>
â”‚   â”œâ”€â”€ <span class="file">manifest.json</span>
â”‚   â”œâ”€â”€ <span class="folder">src/</span>
â”‚   â”‚   â”œâ”€â”€ <span class="file">background.ts</span>
â”‚   â”‚   â”œâ”€â”€ <span class="file">content.ts</span>
â”‚   â”‚   â””â”€â”€ <span class="file">popup.tsx</span>
â”‚   â””â”€â”€ <span class="file">webpack.config.js</span>
â”‚
â””â”€â”€ <span class="folder">scripts/</span>                      <span class="comment"># ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚¹ã‚¯ãƒªãƒ—ãƒˆ</span>
    â”œâ”€â”€ <span class="file">bootstrap.sh</span>              <span class="comment"># åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—</span>
    â”œâ”€â”€ <span class="file">reset-db.sh</span>               <span class="comment"># DB ãƒªã‚»ãƒƒãƒˆ</span>
    â””â”€â”€ <span class="file">generate-fixtures.ts</span>      <span class="comment"># ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ</span>
                </div>

                <h3>ä¾å­˜é–¢ä¿‚ã®ãƒ«ãƒ¼ãƒ«</h3>
                <div class="warning-box">
                    <strong>packages/* â†’ apps/*</strong> ã®æ–¹å‘ã®ã¿è¨±å¯ã€‚é€†æ–¹å‘ã®ä¾å­˜ã¯ç¦æ­¢ã€‚
                </div>
                <table>
                    <tr>
                        <th>ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸</th>
                        <th>ä¾å­˜å…ˆ</th>
                        <th>ä¾å­˜å…ƒ</th>
                    </tr>
                    <tr>
                        <td><code>@als/schema</code></td>
                        <td>zod ã®ã¿</td>
                        <td>å…¨ã‚¢ãƒ—ãƒª</td>
                    </tr>
                    <tr>
                        <td><code>@als/database</code></td>
                        <td>prisma, @als/schema</td>
                        <td>api, worker</td>
                    </tr>
                    <tr>
                        <td><code>@als/logger</code></td>
                        <td>pino</td>
                        <td>å…¨ã‚¢ãƒ—ãƒª</td>
                    </tr>
                    <tr>
                        <td><code>@als/config</code></td>
                        <td>zod</td>
                        <td>å…¨ã‚¢ãƒ—ãƒª</td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- Dockerç’°å¢ƒ -->
        <div id="docker" class="tab-content">
            <div class="card">
                <h2>Docker Compose æ§‹æˆ</h2>

                <div class="info-box">
                    ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã§æœ¬ç•ªã¨åŒç­‰ã®æ§‹æˆã‚’å†ç¾ã€‚S3äº’æ›ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ (MinIO) ã«ã‚ˆã‚Šã€æœ¬ç•ªç§»è¡Œæ™‚ã®ã‚³ãƒ¼ãƒ‰å¤‰æ›´ã‚’æœ€å°åŒ–ã€‚
                </div>

                <h3>ã‚µãƒ¼ãƒ“ã‚¹ä¸€è¦§</h3>

                <div class="docker-service">
                    <div class="docker-icon">ğŸ˜</div>
                    <div class="docker-info">
                        <div class="name">postgres</div>
                        <div class="port">localhost:5432</div>
                        <div class="desc">PostgreSQL 15 - ãƒ¡ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹</div>
                    </div>
                </div>

                <div class="docker-service">
                    <div class="docker-icon">ğŸ”´</div>
                    <div class="docker-info">
                        <div class="name">redis</div>
                        <div class="port">localhost:6379</div>
                        <div class="desc">Redis 7 - BullMQ ã‚¸ãƒ§ãƒ–ã‚­ãƒ¥ãƒ¼</div>
                    </div>
                </div>

                <div class="docker-service">
                    <div class="docker-icon">ğŸ“¦</div>
                    <div class="docker-info">
                        <div class="name">minio</div>
                        <div class="port">localhost:9000 (API) / localhost:9001 (Console)</div>
                        <div class="desc">MinIO - S3äº’æ›ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼ˆç”»åƒä¿å­˜ï¼‰</div>
                    </div>
                </div>

                <div class="docker-service">
                    <div class="docker-icon">ğŸ“Š</div>
                    <div class="docker-info">
                        <div class="name">bull-board</div>
                        <div class="port">localhost:3001</div>
                        <div class="desc">Bull Board - ã‚¸ãƒ§ãƒ–ã‚­ãƒ¥ãƒ¼ç®¡ç†UI</div>
                    </div>
                </div>

                <h3>docker-compose.yml</h3>
                <pre><code>version: '3.8'

services:
  postgres:
    image: postgres:15-alpine
    environment:
      POSTGRES_USER: als_user
      POSTGRES_PASSWORD: als_password
      POSTGRES_DB: als_development
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U als_user -d als_development"]
      interval: 5s
      timeout: 5s
      retries: 5

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    command: redis-server --appendonly yes
    healthcheck:
      test: ["CMD", "redis-cli", "ping"]
      interval: 5s
      timeout: 5s
      retries: 5

  minio:
    image: minio/minio:latest
    environment:
      MINIO_ROOT_USER: minio_access_key
      MINIO_ROOT_PASSWORD: minio_secret_key
    ports:
      - "9000:9000"
      - "9001:9001"
    volumes:
      - minio_data:/data
    command: server /data --console-address ":9001"
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:9000/minio/health/live"]
      interval: 5s
      timeout: 5s
      retries: 5

  # åˆå›èµ·å‹•æ™‚ã«ãƒã‚±ãƒƒãƒˆä½œæˆ
  minio-init:
    image: minio/mc:latest
    depends_on:
      minio:
        condition: service_healthy
    entrypoint: >
      /bin/sh -c "
      mc alias set local http://minio:9000 minio_access_key minio_secret_key;
      mc mb local/images --ignore-existing;
      mc anonymous set download local/images;
      "

volumes:
  postgres_data:
  redis_data:
  minio_data:</code></pre>

                <h3>èµ·å‹•ã‚³ãƒãƒ³ãƒ‰</h3>
                <pre><code># åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
./scripts/bootstrap.sh

# é–‹ç™ºç’°å¢ƒèµ·å‹•
docker-compose up -d

# ãƒ­ã‚°ç¢ºèª
docker-compose logs -f

# åœæ­¢
docker-compose down</code></pre>
            </div>
        </div>

        <!-- DBè¨­è¨ˆ -->
        <div id="database" class="tab-content">
            <div class="card">
                <h2>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆï¼ˆPrisma Schemaï¼‰</h2>

                <h3>ERå›³ï¼ˆæ¦‚è¦ï¼‰</h3>
                <pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   sources   â”‚â”€â”€1:Nâ”€â”€â”‚  products   â”‚â”€â”€1:Nâ”€â”€â”‚  listings   â”‚
â”‚ (ä»•å…¥å…ƒæƒ…å ±) â”‚       â”‚ (çµ±ä¸€å•†å“)   â”‚       â”‚ (å‡ºå“æƒ…å ±)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚1:N
                             â–¼
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚  job_logs   â”‚
                      â”‚ (ã‚¸ãƒ§ãƒ–ãƒ­ã‚°) â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ price_settings  â”‚       â”‚shipping_policiesâ”‚
â”‚ (ä¾¡æ ¼è¨ˆç®—è¨­å®š)   â”‚       â”‚ (eBayé€æ–™è¨­å®š)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>

                <h3>Prisma Schema</h3>
                <pre><code>// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// ========================================
// ä»•å…¥å…ƒæƒ…å ±
// ========================================
model Source {
  id        String   @id @default(cuid())
  type      SourceType
  name      String
  url       String?
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  products  Product[]

  @@map("sources")
}

enum SourceType {
  MERCARI
  YAHOO_AUCTION
  YAHOO_FLEA
  RAKUMA
  RAKUTEN
  AMAZON
  TAKAYAMA
  JOSHIN
  OTHER
}

// ========================================
// çµ±ä¸€å•†å“ãƒ¢ãƒ‡ãƒ«
// ========================================
model Product {
  id                String   @id @default(cuid())

  // ã‚½ãƒ¼ã‚¹æƒ…å ±
  sourceId          String
  source            Source   @relation(fields: [sourceId], references: [id])
  sourceItemId      String   // å…ƒã‚µã‚¤ãƒˆã®å•†å“ID
  sourceUrl         String
  sourceHash        String?  // å·®åˆ†æ¤œçŸ¥ç”¨ãƒãƒƒã‚·ãƒ¥

  // åŸºæœ¬æƒ…å ±ï¼ˆåŸæ–‡ï¼‰
  title             String
  description       String   @db.Text
  price             Int      // ä»•å…¥ä¾¡æ ¼ï¼ˆå††ï¼‰

  // ç¿»è¨³æ¸ˆã¿æƒ…å ±
  titleEn           String?
  descriptionEn     String?  @db.Text

  // å•†å“å±æ€§
  category          String?
  brand             String?
  condition         String?
  weight            Int?     // ã‚°ãƒ©ãƒ 
  attributes        Json     @default("{}")  // AIæŠ½å‡ºå±æ€§

  // ç”»åƒ
  images            String[] // å…ƒç”»åƒURL
  processedImages   String[] // ç™½æŠœãå¾ŒURLï¼ˆMinIO/S3ï¼‰

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  status            ProductStatus @default(PENDING_SCRAPE)
  translationStatus ProcessStatus @default(PENDING)
  imageStatus       ProcessStatus @default(PENDING)

  // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
  scrapedAt         DateTime?
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  listings          Listing[]
  jobLogs           JobLog[]

  @@unique([sourceId, sourceItemId])
  @@index([status])
  @@index([sourceHash])
  @@map("products")
}

enum ProductStatus {
  PENDING_SCRAPE
  PROCESSING_IMAGE
  TRANSLATING
  READY_TO_REVIEW
  APPROVED
  PUBLISHING
  ACTIVE
  SOLD
  OUT_OF_STOCK
  ERROR
  DELETED
}

enum ProcessStatus {
  PENDING
  PROCESSING
  COMPLETED
  ERROR
}

// ========================================
// å‡ºå“æƒ…å ±ï¼ˆãƒãƒ¼ã‚±ãƒƒãƒˆãƒ—ãƒ¬ã‚¤ã‚¹åˆ¥ï¼‰
// ========================================
model Listing {
  id              String   @id @default(cuid())

  productId       String
  product         Product  @relation(fields: [productId], references: [id])

  marketplace     Marketplace
  marketplaceId   String?  // eBay/Joom ã®å‡ºå“ID

  // ä¾¡æ ¼æƒ…å ±
  listingPrice    Float    // å‡ºå“ä¾¡æ ¼ï¼ˆUSDï¼‰
  shippingCost    Float?   // é€æ–™
  currency        String   @default("USD")

  // ãƒãƒ¼ã‚±ãƒƒãƒˆå›ºæœ‰ãƒ‡ãƒ¼ã‚¿ï¼ˆJSONBï¼‰
  marketplaceData Json     @default("{}")

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  status          ListingStatus @default(DRAFT)
  errorMessage    String?

  // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
  listedAt        DateTime?
  soldAt          DateTime?
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@unique([productId, marketplace])
  @@index([marketplace, status])
  @@map("listings")
}

enum Marketplace {
  JOOM
  EBAY
}

enum ListingStatus {
  DRAFT
  PENDING_PUBLISH
  PUBLISHING
  ACTIVE
  PAUSED
  SOLD
  ENDED
  ERROR
}

// ========================================
// ã‚¸ãƒ§ãƒ–ãƒ­ã‚°
// ========================================
model JobLog {
  id          String   @id @default(cuid())

  productId   String?
  product     Product? @relation(fields: [productId], references: [id])

  jobId       String   // BullMQ Job ID
  queueName   String
  jobType     String
  status      JobStatus

  payload     Json     @default("{}")
  result      Json?
  errorMessage String?  @db.Text

  startedAt   DateTime
  completedAt DateTime?
  duration    Int?     // ãƒŸãƒªç§’

  createdAt   DateTime @default(now())

  @@index([productId])
  @@index([queueName, status])
  @@index([createdAt])
  @@map("job_logs")
}

enum JobStatus {
  QUEUED
  PROCESSING
  COMPLETED
  FAILED
  DEAD_LETTER
}

// ========================================
// ä¾¡æ ¼è¨ˆç®—è¨­å®š
// ========================================
model PriceSetting {
  id              String   @id @default(cuid())

  name            String   @unique
  marketplace     Marketplace

  // æ‰‹æ•°æ–™
  platformFeeRate Float    // ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æ‰‹æ•°æ–™ç‡
  paymentFeeRate  Float    // æ±ºæ¸ˆæ‰‹æ•°æ–™ç‡

  // ãƒãƒ¼ã‚¸ãƒ³
  targetProfitRate Float   // ç›®æ¨™åˆ©ç›Šç‡
  adRate          Float    @default(0) // åºƒå‘Šè²»ç‡

  // ç‚ºæ›¿
  exchangeRate    Float    // USD/JPY
  exchangeBuffer  Float    @default(0) // ç‚ºæ›¿ãƒãƒƒãƒ•ã‚¡

  isDefault       Boolean  @default(false)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@map("price_settings")
}

// ========================================
// eBay ã‚·ãƒƒãƒ”ãƒ³ã‚°ãƒãƒªã‚·ãƒ¼
// ========================================
model ShippingPolicy {
  id              String   @id @default(cuid())

  name            String
  region          String   // US, EU, ASIA ãªã©

  // é…é€æ–¹æ³•
  carrier         String   // ePacket, Cpass, EMS ãªã©

  // é€æ–™ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆé‡é‡åˆ¥ï¼‰
  shippingTable   Json     // { "100": 880, "200": 1060, ... }

  // ç‡ƒæ²¹ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚¸
  fuelSurcharge   Float    @default(0)

  // é–¢ç¨è¨­å®š
  dutyThreshold   Float?   // é–¢ç¨é–¾å€¤ï¼ˆUSDï¼‰
  dutyRate        Float?   // é–¢ç¨ç‡

  isActive        Boolean  @default(true)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@map("shipping_policies")
}</code></pre>
            </div>
        </div>

        <!-- å‹å®šç¾©ãƒ»ã‚¹ã‚­ãƒ¼ãƒ -->
        <div id="schema" class="tab-content">
            <div class="card">
                <h2>Zod ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ï¼ˆãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰</h2>

                <div class="info-box">
                    å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ï¼ˆã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°çµæœã€APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼‰ã¯å¿…ãšZodã‚’é€šã—ã¦å†…éƒ¨å‹ã«å¤‰æ›ã€‚ã“ã‚Œã«ã‚ˆã‚Šå‹å®‰å…¨æ€§ã‚’æ‹…ä¿ã€‚
                </div>

                <h3>çµ±ä¸€å•†å“ãƒ¢ãƒ‡ãƒ«ï¼ˆUniversalProductï¼‰</h3>
                <div class="schema-block">
                    <h4>packages/schema/src/product.ts</h4>
                    <pre><code>import { z } from 'zod';

// ã‚½ãƒ¼ã‚¹ã‚¿ã‚¤ãƒ—
export const SourceTypeSchema = z.enum([
  'mercari',
  'yahoo_auction',
  'yahoo_flea',
  'rakuma',
  'rakuten',
  'amazon',
  'takayama',
  'joshin',
  'other',
]);

// å•†å“ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³
export const ConditionSchema = z.enum([
  'new',
  'like_new',
  'good',
  'fair',
  'poor',
]);

// AIæŠ½å‡ºå±æ€§
export const ExtractedAttributesSchema = z.object({
  brand: z.string().optional(),
  model: z.string().optional(),
  color: z.string().optional(),
  size: z.string().optional(),
  material: z.string().optional(),
  year: z.number().optional(),
  gender: z.enum(['mens', 'womens', 'unisex']).optional(),
  // ä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢
  confidence: z.number().min(0).max(1).optional(),
  // æŠ½å‡ºå…ƒ
  extractedBy: z.enum(['ai', 'manual', 'source']).optional(),
});

// çµ±ä¸€å•†å“ãƒ¢ãƒ‡ãƒ«
export const UniversalProductSchema = z.object({
  // ã‚½ãƒ¼ã‚¹æƒ…å ±
  sourceType: SourceTypeSchema,
  sourceUrl: z.string().url(),
  sourceItemId: z.string(),
  sourceHash: z.string().optional(),

  // åŸºæœ¬æƒ…å ±
  title: z.string().min(1).max(500),
  description: z.string(),
  price: z.number().positive(), // å††

  // ç¿»è¨³æ¸ˆã¿
  titleEn: z.string().optional(),
  descriptionEn: z.string().optional(),

  // å•†å“å±æ€§
  category: z.string().optional(),
  brand: z.string().optional(),
  condition: ConditionSchema.optional(),
  weight: z.number().positive().optional(), // ã‚°ãƒ©ãƒ 

  // AIæŠ½å‡ºå±æ€§
  attributes: ExtractedAttributesSchema.default({}),

  // ç”»åƒ
  images: z.array(z.string().url()).min(1),
  processedImages: z.array(z.string().url()).default([]),
});

// å‹ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
export type SourceType = z.infer<typeof SourceTypeSchema>;
export type Condition = z.infer<typeof ConditionSchema>;
export type ExtractedAttributes = z.infer<typeof ExtractedAttributesSchema>;
export type UniversalProduct = z.infer<typeof UniversalProductSchema>;

// ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³é–¢æ•°
export function parseProduct(data: unknown): UniversalProduct {
  return UniversalProductSchema.parse(data);
}

export function safeParseProduct(data: unknown) {
  return UniversalProductSchema.safeParse(data);
}</code></pre>
                </div>

                <h3>ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ—ãƒ¬ã‚¤ã‚¹å›ºæœ‰ã‚¹ã‚­ãƒ¼ãƒ</h3>
                <div class="schema-block">
                    <h4>packages/schema/src/listing.ts</h4>
                    <pre><code>import { z } from 'zod';

// Joomå‡ºå“ãƒ‡ãƒ¼ã‚¿
export const JoomListingDataSchema = z.object({
  joomCategoryId: z.string(),
  joomAttributes: z.record(z.string()).default({}),
  shippingDays: z.number().default(14),
});

// eBayå‡ºå“ãƒ‡ãƒ¼ã‚¿
export const EbayListingDataSchema = z.object({
  ebayCategoryId: z.string(),
  itemSpecifics: z.record(z.string()).default({}),
  shippingPolicyId: z.string().optional(),
  returnPolicyId: z.string().optional(),
  paymentPolicyId: z.string().optional(),
  conditionId: z.number(), // eBay Condition ID
  listingFormat: z.enum(['FixedPrice', 'Auction']).default('FixedPrice'),

  // DDU/DDPä¾¡æ ¼
  dduPrice: z.number().optional(),
  ddpPrice: z.number().optional(),
  dutyAmount: z.number().optional(),
});

// ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ—ãƒ¬ã‚¤ã‚¹åˆ¥å‡ºå“æƒ…å ±
export const ListingSchema = z.object({
  productId: z.string(),
  marketplace: z.enum(['joom', 'ebay']),

  listingPrice: z.number().positive(),
  shippingCost: z.number().nonnegative().optional(),
  currency: z.string().default('USD'),

  // ãƒãƒ¼ã‚±ãƒƒãƒˆå›ºæœ‰ãƒ‡ãƒ¼ã‚¿ï¼ˆdiscriminated unionï¼‰
  marketplaceData: z.union([
    JoomListingDataSchema,
    EbayListingDataSchema,
  ]),
});

export type JoomListingData = z.infer<typeof JoomListingDataSchema>;
export type EbayListingData = z.infer<typeof EbayListingDataSchema>;
export type Listing = z.infer<typeof ListingSchema>;</code></pre>
                </div>

                <h3>ã‚¸ãƒ§ãƒ–ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ã‚¹ã‚­ãƒ¼ãƒ</h3>
                <div class="schema-block">
                    <h4>packages/schema/src/job.ts</h4>
                    <pre><code>import { z } from 'zod';

// ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã‚¸ãƒ§ãƒ–
export const ScrapeJobPayloadSchema = z.object({
  url: z.string().url(),
  sourceType: z.string(),
  priority: z.number().default(0),
  retryCount: z.number().default(0),
});

// ç”»åƒå‡¦ç†ã‚¸ãƒ§ãƒ–
export const ImageJobPayloadSchema = z.object({
  productId: z.string(),
  imageUrls: z.array(z.string().url()),
  removeBackground: z.boolean().default(true),
});

// ç¿»è¨³ã‚¸ãƒ§ãƒ–
export const TranslateJobPayloadSchema = z.object({
  productId: z.string(),
  title: z.string(),
  description: z.string(),
  extractAttributes: z.boolean().default(true),
});

// å‡ºå“ã‚¸ãƒ§ãƒ–
export const PublishJobPayloadSchema = z.object({
  productId: z.string(),
  marketplace: z.enum(['joom', 'ebay']),
  listingData: z.record(z.unknown()),
});

// åœ¨åº«ç›£è¦–ã‚¸ãƒ§ãƒ–
export const InventoryJobPayloadSchema = z.object({
  productId: z.string(),
  sourceUrl: z.string().url(),
  currentHash: z.string().optional(),
});

export type ScrapeJobPayload = z.infer<typeof ScrapeJobPayloadSchema>;
export type ImageJobPayload = z.infer<typeof ImageJobPayloadSchema>;
export type TranslateJobPayload = z.infer<typeof TranslateJobPayloadSchema>;
export type PublishJobPayload = z.infer<typeof PublishJobPayloadSchema>;
export type InventoryJobPayload = z.infer<typeof InventoryJobPayloadSchema>;</code></pre>
                </div>
            </div>
        </div>

        <!-- ã‚¸ãƒ§ãƒ–ã‚­ãƒ¥ãƒ¼ -->
        <div id="queue" class="tab-content">
            <div class="card">
                <h2>BullMQ ã‚¸ãƒ§ãƒ–ã‚­ãƒ¥ãƒ¼è¨­è¨ˆ</h2>

                <div class="consensus-box">
                    <h4>âœ… 3è€…å”è­°ã®åˆæ„äº‹é …</h4>
                    <ul class="consensus-list">
                        <li>å„ªå…ˆåº¦: publish > inventory > translate > image > scrape</li>
                        <li>ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã¯å¤–éƒ¨APIè¦ç´„ã®ä¸‹é™ã‹ã‚‰é€†ç®—ã€ä¿å®ˆçš„ã«é–‹å§‹</li>
                        <li>å…¨ã‚­ãƒ¥ãƒ¼ã§å†è©¦è¡Œå›æ•°ï¼‹æŒ‡æ•°ãƒãƒƒã‚¯ã‚ªãƒ•ï¼‹ã‚¸ãƒƒã‚¿ãƒ¼ã‚’å›ºå®šåŒ–</li>
                        <li>Graceful Shutdown ã¨ DLQ ã‚’ Phase 1 ã‹ã‚‰å®Ÿè£…</li>
                        <li>Bull Board ã§ã‚¸ãƒ§ãƒ–å¯è¦–åŒ–</li>
                    </ul>
                </div>

                <h3>ã‚­ãƒ¥ãƒ¼ä¸€è¦§</h3>

                <div class="queue-card priority-1">
                    <div class="queue-header">
                        <span class="queue-name">publish-queue</span>
                        <span class="queue-priority p1">å„ªå…ˆåº¦ 1</span>
                    </div>
                    <p>Joom/eBay ã¸ã®å‡ºå“ã‚¸ãƒ§ãƒ–</p>
                    <div class="queue-settings">
                        <span>ãƒ¬ãƒ¼ãƒˆåˆ¶é™: 5ä»¶/åˆ†</span>
                        <span>ä¸¦åˆ—æ•°: 2</span>
                        <span>ãƒªãƒˆãƒ©ã‚¤: 3å›</span>
                        <span>ãƒãƒƒã‚¯ã‚ªãƒ•: æŒ‡æ•°ï¼ˆ1åˆ†â†’2åˆ†â†’4åˆ†ï¼‰</span>
                    </div>
                </div>

                <div class="queue-card priority-2">
                    <div class="queue-header">
                        <span class="queue-name">inventory-queue</span>
                        <span class="queue-priority p2">å„ªå…ˆåº¦ 2</span>
                    </div>
                    <p>åœ¨åº«ç›£è¦–ãƒ»ä¾¡æ ¼èª¿æ•´ã‚¸ãƒ§ãƒ–ï¼ˆ1æ—¥3å›ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼‰</p>
                    <div class="queue-settings">
                        <span>ãƒ¬ãƒ¼ãƒˆåˆ¶é™: 10ä»¶/åˆ†</span>
                        <span>ä¸¦åˆ—æ•°: 3</span>
                        <span>ãƒªãƒˆãƒ©ã‚¤: 5å›</span>
                        <span>ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«: 10:00, 15:00, 21:00 (Â±30åˆ†ã‚¸ãƒƒã‚¿ãƒ¼)</span>
                    </div>
                </div>

                <div class="queue-card priority-3">
                    <div class="queue-header">
                        <span class="queue-name">translate-queue</span>
                        <span class="queue-priority p3">å„ªå…ˆåº¦ 3</span>
                    </div>
                    <p>ç¿»è¨³ + AIå±æ€§æŠ½å‡ºã‚¸ãƒ§ãƒ–</p>
                    <div class="queue-settings">
                        <span>ãƒ¬ãƒ¼ãƒˆåˆ¶é™: 20ä»¶/åˆ†</span>
                        <span>ä¸¦åˆ—æ•°: 5</span>
                        <span>ãƒªãƒˆãƒ©ã‚¤: 3å›</span>
                        <span>ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ: 60ç§’</span>
                    </div>
                </div>

                <div class="queue-card priority-4">
                    <div class="queue-header">
                        <span class="queue-name">image-queue</span>
                        <span class="queue-priority p4">å„ªå…ˆåº¦ 4</span>
                    </div>
                    <p>ç”»åƒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ + ç™½æŠœãå‡¦ç†</p>
                    <div class="queue-settings">
                        <span>ãƒ¬ãƒ¼ãƒˆåˆ¶é™: ãªã—</span>
                        <span>ä¸¦åˆ—æ•°: 3</span>
                        <span>ãƒªãƒˆãƒ©ã‚¤: 3å›</span>
                        <span>ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ: 120ç§’</span>
                    </div>
                </div>

                <div class="queue-card priority-5">
                    <div class="queue-header">
                        <span class="queue-name">scrape-queue</span>
                        <span class="queue-priority p5">å„ªå…ˆåº¦ 5</span>
                    </div>
                    <p>å•†å“æƒ…å ±ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ï¼ˆä½å®…ç”¨ProxyçµŒç”±ï¼‰</p>
                    <div class="queue-settings">
                        <span>ãƒ¬ãƒ¼ãƒˆåˆ¶é™: 10ä»¶/åˆ†</span>
                        <span>ä¸¦åˆ—æ•°: 2</span>
                        <span>ãƒªãƒˆãƒ©ã‚¤: 5å›</span>
                        <span>ãƒãƒƒã‚¯ã‚ªãƒ•: æŒ‡æ•°ï¼‹ã‚¸ãƒƒã‚¿ãƒ¼ï¼ˆ30ç§’â†’1åˆ†â†’2åˆ†ï¼‰</span>
                    </div>
                </div>

                <h3>Dead Letter Queue (DLQ)</h3>
                <pre><code>// ãƒªãƒˆãƒ©ã‚¤å›æ•°è¶…éæ™‚ã®å‡¦ç†
const deadLetterQueue = new Queue('dead-letter-queue', { connection });

// å„ã‚­ãƒ¥ãƒ¼ã§ DLQ è¨­å®š
const scrapeQueue = new Queue('scrape-queue', {
  connection,
  defaultJobOptions: {
    attempts: 5,
    backoff: {
      type: 'exponential',
      delay: 30000, // 30ç§’
    },
    removeOnComplete: 100,
    removeOnFail: false, // å¤±æ•—ã‚¸ãƒ§ãƒ–ã¯ä¿æŒ
  },
});

// å¤±æ•—æ™‚ã« DLQ ã¸ç§»å‹•
scrapeQueue.on('failed', async (job, err) => {
  if (job.attemptsMade >= job.opts.attempts) {
    await deadLetterQueue.add('dead-letter', {
      originalQueue: 'scrape-queue',
      jobId: job.id,
      payload: job.data,
      error: err.message,
      failedAt: new Date().toISOString(),
    });
  }
});</code></pre>

                <h3>Graceful Shutdown</h3>
                <pre><code>// apps/worker/src/graceful-shutdown.ts
import { Worker } from 'bullmq';

const workers: Worker[] = [];

export function registerWorker(worker: Worker) {
  workers.push(worker);
}

async function shutdown() {
  console.log('Graceful shutdown initiated...');

  // æ–°è¦ã‚¸ãƒ§ãƒ–ã®å—ä»˜åœæ­¢
  await Promise.all(workers.map(w => w.pause()));

  // å‡¦ç†ä¸­ã®ã‚¸ãƒ§ãƒ–å®Œäº†ã‚’å¾…æ©Ÿï¼ˆæœ€å¤§30ç§’ï¼‰
  await Promise.all(workers.map(w => w.close()));

  console.log('All workers closed. Exiting.');
  process.exit(0);
}

process.on('SIGTERM', shutdown);
process.on('SIGINT', shutdown);</code></pre>
            </div>
        </div>

        <!-- ç’°å¢ƒå¤‰æ•° -->
        <div id="env" class="tab-content">
            <div class="card">
                <h2>ç’°å¢ƒå¤‰æ•°ç®¡ç†</h2>

                <h3>å‘½åè¦ç´„</h3>
                <table class="env-table">
                    <tr>
                        <th>ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹</th>
                        <th>ç”¨é€”</th>
                    </tr>
                    <tr>
                        <td>DATABASE_</td>
                        <td>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šæƒ…å ±</td>
                    </tr>
                    <tr>
                        <td>REDIS_</td>
                        <td>Redisæ¥ç¶šæƒ…å ±</td>
                    </tr>
                    <tr>
                        <td>S3_</td>
                        <td>ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼ˆMinIO/S3ï¼‰</td>
                    </tr>
                    <tr>
                        <td>PROXY_</td>
                        <td>ä½å®…ç”¨ãƒ—ãƒ­ã‚­ã‚·è¨­å®š</td>
                    </tr>
                    <tr>
                        <td>OPENAI_</td>
                        <td>OpenAI APIï¼ˆç¿»è¨³ï¼‰</td>
                    </tr>
                    <tr>
                        <td>JOOM_</td>
                        <td>Joom APIèªè¨¼</td>
                    </tr>
                    <tr>
                        <td>EBAY_</td>
                        <td>eBay APIèªè¨¼</td>
                    </tr>
                </table>

                <h3>.env.example</h3>
                <pre><code># ========================================
# Database
# ========================================
DATABASE_URL="postgresql://als_user:als_password@localhost:5432/als_development"

# ========================================
# Redis
# ========================================
REDIS_URL="redis://localhost:6379"

# ========================================
# Object Storage (MinIO / S3)
# ========================================
S3_ENDPOINT="http://localhost:9000"
S3_ACCESS_KEY="minio_access_key"
S3_SECRET_KEY="minio_secret_key"
S3_BUCKET="images"
S3_REGION="us-east-1"

# ========================================
# Proxy (æœ¬ç•ªã®ã¿)
# ========================================
# PROXY_HOST="gate.smartproxy.com"
# PROXY_PORT="7000"
# PROXY_USER="your_username"
# PROXY_PASS="your_password"

# ========================================
# OpenAI (ç¿»è¨³ãƒ»å±æ€§æŠ½å‡º)
# ========================================
OPENAI_API_KEY="sk-..."

# ========================================
# Joom API
# ========================================
# JOOM_MERCHANT_ID="..."
# JOOM_API_KEY="..."

# ========================================
# eBay API
# ========================================
# EBAY_CLIENT_ID="..."
# EBAY_CLIENT_SECRET="..."
# EBAY_REFRESH_TOKEN="..."

# ========================================
# App Settings
# ========================================
NODE_ENV="development"
LOG_LEVEL="debug"
API_PORT="3000"
BULL_BOARD_PORT="3001"</code></pre>

                <h3>ç’°å¢ƒå¤‰æ•°ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³</h3>
                <pre><code>// packages/config/src/env.ts
import { z } from 'zod';

const envSchema = z.object({
  NODE_ENV: z.enum(['development', 'production', 'test']).default('development'),

  // Database
  DATABASE_URL: z.string().url(),

  // Redis
  REDIS_URL: z.string().url(),

  // S3
  S3_ENDPOINT: z.string().url(),
  S3_ACCESS_KEY: z.string().min(1),
  S3_SECRET_KEY: z.string().min(1),
  S3_BUCKET: z.string().min(1),

  // Optional: Proxy
  PROXY_HOST: z.string().optional(),
  PROXY_PORT: z.string().optional(),
  PROXY_USER: z.string().optional(),
  PROXY_PASS: z.string().optional(),

  // OpenAI
  OPENAI_API_KEY: z.string().startsWith('sk-').optional(),

  // Ports
  API_PORT: z.string().default('3000'),
  BULL_BOARD_PORT: z.string().default('3001'),
  LOG_LEVEL: z.enum(['debug', 'info', 'warn', 'error']).default('info'),
});

export const env = envSchema.parse(process.env);
export type Env = z.infer<typeof envSchema>;</code></pre>

                <div class="warning-box">
                    <strong>ãƒ­ã‚°ãƒã‚¹ã‚¯å¯¾è±¡:</strong> PROXY_PASS, S3_SECRET_KEY, OPENAI_API_KEY, EBAY_CLIENT_SECRET ã¯ãƒ­ã‚°ã«å‡ºåŠ›ã—ãªã„ã€‚Pinoã®redactã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§è¨­å®šã€‚
                </div>
            </div>
        </div>

        <!-- å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ— -->
        <div id="roadmap" class="tab-content">
            <div class="card">
                <h2>Phase 1 å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—</h2>

                <div class="info-box">
                    Phase 1 ã®ç›®æ¨™ã¯ã€Œé–‹ç™ºè€…ãŒè¿·ã‚ãšã«æ©Ÿèƒ½è¿½åŠ ã§ãã‚‹ã€å …ç‰¢ãªåœŸå°ã€ã‚’ä½œã‚‹ã“ã¨ã€‚
                </div>

                <h3>Week 1: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ– & ã‚¤ãƒ³ãƒ•ãƒ©</h3>
                <ol class="step-list">
                    <li>
                        <strong>Turborepo åˆæœŸåŒ–</strong><br>
                        <code>npx create-turbo@latest</code> ã§ãƒ¢ãƒãƒ¬ãƒä½œæˆã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆæ•´å‚™
                    </li>
                    <li>
                        <strong>Docker Compose ä½œæˆ</strong><br>
                        Postgres, Redis, MinIO ã®è¨­å®šã€ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã€ãƒœãƒªãƒ¥ãƒ¼ãƒ è¨­å®š
                    </li>
                    <li>
                        <strong>å…±æœ‰ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä½œæˆ</strong><br>
                        @als/schema, @als/database, @als/logger, @als/config ã®éª¨æ ¼
                    </li>
                    <li>
                        <strong>bootstrap.sh ä½œæˆ</strong><br>
                        åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã®è‡ªå‹•åŒ–ï¼ˆä¾å­˜ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€DBä½œæˆã€ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
                    </li>
                </ol>

                <h3>Week 2: DBãƒ»ã‚­ãƒ¥ãƒ¼ãƒ»åŸºæœ¬ãƒ­ã‚¸ãƒƒã‚¯</h3>
                <ol class="step-list">
                    <li>
                        <strong>Prisma Schema å®šç¾©</strong><br>
                        å…¨ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©ã€ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œã€ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿æŠ•å…¥
                    </li>
                    <li>
                        <strong>Zod ã‚¹ã‚­ãƒ¼ãƒå®Ÿè£…</strong><br>
                        UniversalProduct, Listing, JobPayload ã®å…¨ã‚¹ã‚­ãƒ¼ãƒ
                    </li>
                    <li>
                        <strong>BullMQ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—</strong><br>
                        5ã‚­ãƒ¥ãƒ¼å®šç¾©ã€Graceful Shutdownã€DLQå®Ÿè£…
                    </li>
                    <li>
                        <strong>Bull Board é…ç½®</strong><br>
                        ã‚¸ãƒ§ãƒ–å¯è¦–åŒ–UIã€ç®¡ç†ç”»é¢ã¸ã®çµ„ã¿è¾¼ã¿
                    </li>
                    <li>
                        <strong>æœ€å°ç–é€šç¢ºèª</strong><br>
                        URLå—ä»˜ â†’ ã‚­ãƒ¥ãƒ¼æŠ•å…¥ â†’ DBä¿å­˜ ã®ä¸€æœ¬é“ã‚’é€šã™
                    </li>
                </ol>

                <h3>æˆæœç‰©ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ</h3>
                <table>
                    <tr>
                        <th>æˆæœç‰©</th>
                        <th>å®Œäº†åŸºæº–</th>
                    </tr>
                    <tr>
                        <td>ãƒ¢ãƒãƒ¬ãƒæ§‹æˆ</td>
                        <td><code>turbo run build</code> ãŒå…¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§æˆåŠŸ</td>
                    </tr>
                    <tr>
                        <td>Dockerç’°å¢ƒ</td>
                        <td><code>docker-compose up</code> ã§å…¨ã‚µãƒ¼ãƒ“ã‚¹èµ·å‹•</td>
                    </tr>
                    <tr>
                        <td>DBãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</td>
                        <td><code>prisma migrate deploy</code> ãŒæˆåŠŸ</td>
                    </tr>
                    <tr>
                        <td>Zodãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³</td>
                        <td>å…¨ã‚¹ã‚­ãƒ¼ãƒã®å˜ä½“ãƒ†ã‚¹ãƒˆãŒãƒ‘ã‚¹</td>
                    </tr>
                    <tr>
                        <td>BullMQã‚­ãƒ¥ãƒ¼</td>
                        <td>5ã‚­ãƒ¥ãƒ¼ãŒ Bull Board ã§å¯è¦–åŒ–</td>
                    </tr>
                    <tr>
                        <td>Graceful Shutdown</td>
                        <td>SIGTERM ã§å‡¦ç†ä¸­ã‚¸ãƒ§ãƒ–å®Œäº†å¾Œã«çµ‚äº†</td>
                    </tr>
                    <tr>
                        <td>ç–é€šç¢ºèª</td>
                        <td>URL â†’ DBä¿å­˜ ã®E2EãŒå‹•ä½œ</td>
                    </tr>
                </table>

                <h3>æ¬¡ã®ãƒ•ã‚§ãƒ¼ã‚ºã¸ã®å¼•ãç¶™ã</h3>
                <p>Phase 1 å®Œäº†å¾Œã€ä»¥ä¸‹ãŒ Phase 2 ã§å®Ÿè£…å¯èƒ½ãªçŠ¶æ…‹ã«ãªã‚‹ï¼š</p>
                <ul>
                    <li>Chromeæ‹¡å¼µã‹ã‚‰ã®URLå—ä»˜ï¼ˆAPI Readyï¼‰</li>
                    <li>ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ãƒ¯ãƒ¼ã‚«ãƒ¼å®Ÿè£…ï¼ˆã‚­ãƒ¥ãƒ¼ Readyï¼‰</li>
                    <li>ç”»åƒå‡¦ç†ã‚µãƒ¼ãƒ“ã‚¹é€£æºï¼ˆS3 Readyï¼‰</li>
                    <li>ç¿»è¨³ã‚¸ãƒ§ãƒ–å®Ÿè£…ï¼ˆã‚¹ã‚­ãƒ¼ãƒ Readyï¼‰</li>
                </ul>
            </div>
        </div>
    </div>

    <footer>
        <p>ä½œæˆæ—¥: 2026-02-04 | 3è€…AIå”è­°ï¼ˆClaude + GPT-5 + Geminiï¼‰ã«ã‚ˆã‚‹å®Ÿè£…è¨ˆç”»</p>
        <div class="nav-links" style="margin-top: 15px;">
            <a href="index.html">â† è¨­è¨ˆè¨ˆç”»æ›¸</a>
        </div>
    </footer>

    <script>
        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(btn => {
                btn.classList.remove('active');
            });

            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }
    </script>
</body>
</html>
